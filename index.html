<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LF Monity AI</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#4a90e2">
<meta name="author" content="Larry Fl√°vio Silva Oliveira">
<meta name="creator" content="Larry Fl√°vio Silva Oliveira">
<meta name="copyright" content="¬© Larry Fl√°vio Silva Oliveira">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
--azul:#4a90e2;
--vermelho:#ff5c5c;
--verde:#44bd32;
--escuro:#1e272e;
--card:#ffffffcc
}
*{box-sizing:border-box}
body{
margin:0;
font-family:'Segoe UI',sans-serif;
background:linear-gradient(135deg,#eef5ff,#f5f6fa);
transition:.4s
}
body.dark{
background:linear-gradient(135deg,#1e272e,#2f3640);
color:#f5f6fa
}
header{
padding:22px;
text-align:center;
color:#fff;
background:linear-gradient(90deg,var(--azul),#6fa8ff)
}
main{max-width:1200px;margin:auto;padding:20px}
.dashboard{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
gap:16px
}
.card{
background:var(--card);
padding:18px;
border-radius:20px;
text-align:center;
box-shadow:0 8px 20px rgba(0,0,0,.15)
}
.grid{
display:grid;
grid-template-columns:1.5fr .7fr;
gap:25px;
margin-top:30px
}
@media(max-width:900px){
.grid{grid-template-columns:1fr}
}
.box{
background:var(--card);
padding:22px;
border-radius:22px;
box-shadow:0 8px 20px rgba(0,0,0,.15)
}
.form{
display:grid;
grid-template-columns:2fr 1fr 1fr 1fr 1fr 1fr;
gap:10px
}
@media(max-width:900px){
.form{grid-template-columns:1fr}
}
input,select,button{
padding:12px;
border-radius:12px;
border:none;
box-shadow:0 2px 6px rgba(0,0,0,.2)
}
button{
background:linear-gradient(90deg,var(--azul),#6fa8ff);
color:#fff;
font-weight:bold;
cursor:pointer
}
button:hover{opacity:.9}

.progress{
background:#ddd;
border-radius:14px;
height:22px;
overflow:hidden;
margin:10px 0
}
.progress div{
height:100%;
display:flex;
align-items:center;
justify-content:center;
font-size:13px;
color:#fff
}

.table-wrap{max-height:300px;overflow:auto;margin-top:10px}
table{width:100%;border-collapse:collapse;font-size:13px}
th,td{padding:8px;border-bottom:1px solid #eee}

table button{
background:var(--vermelho);
padding:6px 8px;
border-radius:8px;
font-size:12px
}

.toggle{
position:fixed;
bottom:20px;
right:20px;
background:#111;
color:#fff;
width:52px;
height:52px;
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
font-size:22px;
cursor:pointer
}
footer{text-align:center;font-size:12px;opacity:.7;margin:20px}
</style>
</head>

<body>

<header style="text-align:center;">
  <!-- Logo profissional LF Monity AI -->
  <svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 200 200">
    <defs>
      <linearGradient id="gradFundo" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:#4a90e2;stop-opacity:1" />
        <stop offset="100%" style="stop-color:#44bd32;stop-opacity:1" />
      </linearGradient>
      <filter id="sombra" x="-50%" y="-50%" width="200%" height="200%">
        <feDropShadow dx="2" dy="2" stdDeviation="3" flood-color="#000000" flood-opacity="0.4"/>
      </filter>
    </defs>
    <circle cx="100" cy="100" r="90" fill="url(#gradFundo)" />
    <text x="50%" y="50%" text-anchor="middle" dominant-baseline="middle"
          font-family="Segoe UI, sans-serif" font-size="60" font-weight="bold"
          fill="white" filter="url(#sombra)">LF</text>
    <text x="50%" y="75%" text-anchor="middle"
          font-family="Segoe UI, sans-serif" font-size="22" font-weight="bold"
          fill="white" filter="url(#sombra)">Monity AI</text>
  </svg>
  <h1>LF Monity AI</h1>
  <small>Seu controle financeiro inteligente</small>
</header>

<main>

<div class="dashboard">
<div class="card"><h4>ENTRADA</h4><p id="entrada">R$ 0,00</p></div>
<div class="card"><h4>SA√çDA</h4><p id="saida">R$ 0,00</p></div>
<div class="card"><h4>INVEST.</h4><p id="investimento">R$ 0,00</p></div>
<div class="card"><h4>SALDO</h4><p id="saldo">R$ 0,00</p></div>
</div>

<div class="grid">

<div class="box">
<h3>Lan√ßamentos</h3>
<div class="form">
<input id="desc" placeholder="Descri√ß√£o">
<input id="valor" type="number" step="0.01" placeholder="Valor">
<select id="tipo">
<option value="entrada">Entrada</option>
<option value="saida">Sa√≠da</option>
<option value="investimento">Investimento</option>
</select>
<select id="cat">
<option>Aluguel</option>
<option>Alimenta√ß√£o</option>
<option>Transporte</option>
<option>Lazer</option>
<option>Educa√ß√£o</option>
<option>Outros</option>
</select>
<input id="mes" type="month">
<button onclick="adicionar()">Adicionar</button>
</div>

<div class="table-wrap">
<table id="tabela">
<thead>
<tr>
<th>Desc</th><th>Tipo</th><th>Cat</th><th>M√™s</th><th>Valor</th><th></th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</div>

<div class="box">
<h3>IA Financeira</h3>

<select id="filtroMes" onchange="render()"></select>

<input id="meta" type="number" step="0.01" placeholder="Meta mensal">
<button onclick="salvarMeta()">Salvar Meta</button>

<div class="progress"><div id="barra">0%</div></div>

<canvas id="graficoResumo" height="200"></canvas>
<canvas id="graficoMes" height="200"></canvas>

<div id="insights"></div>
</div>

</div>
</main>

<footer>
LF Monity AI ¬© <span id="ano"></span><br>
<span>Desenvolvido por <strong>Larry Fl√°vio</strong></span>
</footer>

<script>
document.getElementById('ano').textContent=new Date().getFullYear();
</script>

<div class="toggle" onclick="toggleTema()">üåì</div>

<script>
// ELEMENTOS
const desc=document.getElementById('desc');
const valor=document.getElementById('valor');
const tipo=document.getElementById('tipo');
const cat=document.getElementById('cat');
const mes=document.getElementById('mes');
const tabela=document.getElementById('tabela');
const entrada=document.getElementById('entrada');
const saida=document.getElementById('saida');
const investimento=document.getElementById('investimento');
const saldo=document.getElementById('saldo');
const filtroMes=document.getElementById('filtroMes');
const meta=document.getElementById('meta');
const barra=document.getElementById('barra');
const insights=document.getElementById('insights');
const graficoResumo=document.getElementById('graficoResumo');
const graficoMes=document.getElementById('graficoMes');

let dados=JSON.parse(localStorage.getItem('lifeppp_dados'))||[];
let metas=JSON.parse(localStorage.getItem('lifeppp_metas'))||{};
let chartResumo=null,chartMes=null;

const f=v=>v.toLocaleString('pt-BR',{style:'currency',currency:'BRL'});

function adicionar(){
if(!desc.value||!valor.value||valor.value<=0||!mes.value){
alert('Preencha corretamente');
return;
}
dados.push({
id:Date.now(),
d:desc.value,
v:+valor.value,
t:tipo.value,
c:cat.value,
m:mes.value
});
desc.value='';
valor.value='';
salvar();
}

function salvar(){
localStorage.setItem('lifeppp_dados',JSON.stringify(dados));
localStorage.setItem('lifeppp_metas',JSON.stringify(metas));
render();
}

function remover(id){
dados=dados.filter(x=>x.id!==id);
salvar();
}

function salvarMeta(){
if(!filtroMes.value||!meta.value){
alert('Selecione m√™s e meta');
return;
}
metas[filtroMes.value]=+meta.value;
salvar();
}

function render(){
const tbody=tabela.querySelector('tbody');
tbody.innerHTML='';

let e=0,s=0,i=0,porMes={},porCat={};
const fm=filtroMes.value;

dados.filter(x=>!fm||x.m===fm).forEach(x=>{
tbody.innerHTML+=`
<tr>
<td>${x.d}</td>
<td>${x.t}</td>
<td>${x.c}</td>
<td>${x.m}</td>
<td>${f(x.v)}</td>
<td><button onclick="remover(${x.id})">‚ùå</button></td>
</tr>`;
if(x.t==='entrada')e+=x.v;
if(x.t==='saida'){
s+=x.v;
porMes[x.m]=(porMes[x.m]||0)+x.v;
porCat[x.c]=(porCat[x.c]||0)+x.v;
}
if(x.t==='investimento')i+=x.v;
});

entrada.textContent=f(e);
saida.textContent=f(s);
investimento.textContent=f(i);
saldo.textContent=f(e-s-i);

filtroMes.innerHTML='<option value="">Todos</option>'+
[...new Set(dados.map(x=>x.m))].map(m=>`<option ${m===fm?'selected':''}>${m}</option>`).join('');

meta.value=metas[fm]||'';

const lim=metas[fm]||0;
let p=lim?Math.min(100,(s/lim)*100):0;
barra.style.width=p+'%';
barra.textContent=p.toFixed(0)+'%';
barra.style.background=p>80?'var(--vermelho)':'var(--verde)';

const maiorCat=Object.entries(porCat).sort((a,b)=>b[1]-a[1])[0]?.[0]||'-';

insights.innerHTML=`
<b>An√°lise:</b><br>
Total gasto: ${f(s)}<br>
Maior categoria: ${maiorCat}
`;

if(chartResumo)chartResumo.destroy();
chartResumo=new Chart(graficoResumo,{
type:'doughnut',
data:{labels:['Entrada','Sa√≠da','Invest.','Saldo'],
datasets:[{data:[e,s,i,e-s-i]}]}
});

if(chartMes)chartMes.destroy();
if(Object.keys(porMes).length){
chartMes=new Chart(graficoMes,{
type:'line',
data:{labels:Object.keys(porMes),
datasets:[{label:'Sa√≠das',data:Object.values(porMes),tension:.4}]}
});
}
}

function toggleTema(){
document.body.classList.toggle('dark');
localStorage.setItem('tema',document.body.classList.contains('dark'));
}
if(localStorage.getItem('tema')==='true'){
document.body.classList.add('dark');
}

render();

<script>
if ('serviceWorker' in navigator) {
navigator.serviceWorker.register('service-worker.js')
.then(()=>console.log('PWA ativo'))
.catch(err=>console.error('Erro PWA',err));
}
</script><script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js').then(reg => {

    reg.addEventListener('updatefound', () => {
      const newWorker = reg.installing;

      newWorker.addEventListener('statechange', () => {
        if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
          mostrarAvisoAtualizacao();
        }
      });
    });

  });
}

function mostrarAvisoAtualizacao() {
  const aviso = document.createElement('div');
  aviso.innerHTML = `
    <div style="
      position:fixed;
      bottom:20px;
      left:50%;
      transform:translateX(-50%);
      background:#1e272e;
      color:#fff;
      padding:14px 20px;
      border-radius:14px;
      box-shadow:0 10px 25px rgba(0,0,0,.4);
      z-index:9999;
      font-size:14px;
    ">
      üöÄ Nova vers√£o dispon√≠vel
      <button onclick="atualizarApp()" style="
        margin-left:12px;
        background:#44bd32;
        border:none;
        padding:6px 12px;
        border-radius:8px;
        color:#fff;
        font-weight:bold;
      ">
        Atualizar
      </button>
    </div>
  `;
  document.body.appendChild(aviso);
}

function atualizarApp(){
  navigator.serviceWorker.getRegistration().then(reg => {
    if(reg.waiting){
      reg.waiting.postMessage({ action: 'skipWaiting' });
    }
  });
  location.reload();
}
</script>
  

</body>
</html>
